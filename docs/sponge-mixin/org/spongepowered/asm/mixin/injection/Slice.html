<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Slice (Mixin 0.9.2+mixin.0.8.2 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.spongepowered.asm.mixin.injection, annotation type: Slice">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.spongepowered.asm.mixin.injection</a></div>
<h1 title="Annotation Type Slice" class="title">Annotation Type Slice</h1>
</div>
<section class="description">
<hr>
<pre>@Target({})
@Retention(RUNTIME)
public @interface <span class="type-name-label">Slice</span></pre>
<div class="block">A <tt>Slice</tt> identifies a section of a method to search for injection
 points.
 
 <p>Using slices provides for a much more expressive way of identifying target
 injection points in a method, which has two advantages:</p>
 
 <ol>
   <li>Encoding assumptions about the structure of a method makes it easier to
   detect (and fail-fast) when a method has changed in an unexpected way.</li>
   <li>Injection points using slices are less brittle than points specified
   with large ordinals because they allow injection points to be specified
   with reference to characteristics of the method rather than arbitrary
   ordinal values.</li>
 </ol>
 
 <p>Consider the following example:</p>
 
 <blockquote><pre>
 private void foo(Bar bar) {
     bar.update();
     List&lt;Thing&gt; list = bar.getThings();
     for (Thing thing : list) {
         thing.<b>processStuff</b>();
     }
     
     Thing specialThing = bar.getSpecialThing();
     if (specialThing.isReady()) {
         specialThing.<b>processStuff</b>();
         bar.update();
     }
     
     bar.notifyFoo();
 }</pre></blockquote>
 
 <p>Let's assume we are interested in applying a <a href="Redirect.html" title="annotation in org.spongepowered.asm.mixin.injection"><code>Redirect</code></a> to the
 <tt>processStuff()</tt> method call within the <tt>if</tt> block. Using
 <tt>ordinal</tt> we can achieve this as follows:</p>
 
 <blockquote><pre>
 &#064;At(value = "INVOKE", target = "processStuff", ordinal = 1)</pre>
 </blockquote>
 
 <p>This will work fine initially. However consider the case that in a future
 version of the target library the method is altered and an additional call to
 <tt>processStuff()</tt> is added:</p>  
 
 <blockquote><pre>
 private void foo(Bar bar) {
     bar.update();
     List&lt;Thing&gt; list = bar.getThings();
     for (Thing thing : list) {
         thing.<b>processStuff</b>();
     }
     
     // A new call to processStuff, which now has the ordinal 1
     bar.getActiveThing().<b>processStuff</b>();
     
     Thing specialThing = bar.getSpecialThing();
     if (specialThing.isReady()) {
         specialThing.<b>processStuff</b>();
         bar.update();
     }
     
     bar.notifyFoo();
 }</pre></blockquote>
 
 <p>It's still pretty easy for a human to identify the correct point since the
 original <tt>if</tt> hasn't changed. However the use of ordinals means that
 the injection is now wrong and must be fixed by hand.</p>
 
 <p>We can make the injection point more expressive and reliable by using a
 <tt>Slice</tt>. We know in this example that the call to <tt>processStuff()
 </tt> we want is the one immediately after a call to <tt>isReady()</tt>. We
 can <em>slice</em> the method at the call to <tt>isReady()</tt> and modify
 the injector accordingly:</p>
 
 <blockquote><pre>
 &#064;Inject(
     slice = &#064;Slice(
         from = &#064;At(value = "INVOKE", target = "isReady")
     )
     at = &#064;At(value = "INVOKE", target = "processStuff", ordinal = 0)
 )</pre></blockquote>
 
 <p>The <tt>ordinal</tt> is specified as <tt>0</tt> because the scope of the
 injection point is now the region of the method defined by the <em>slice</em>
 .</p>
 
 <p>Slices can be specified using a <a href="#from()"><code>from()</code></a> point, a <a href="#to()"><code>to()</code></a> point,
 or both. <a href="Inject.html" title="annotation in org.spongepowered.asm.mixin.injection"><code>Callback Injectors</code></a> using multiple injection points
 can distinguish different slices using <a href="#id()"><code>id()</code></a> and then specify the slice
 to use in the <a href="At.html#slice()"><code>At.slice()</code></a> argument.</p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation.type.optional.element.summary">
<h2>Optional Element Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Optional Elements</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Optional Element</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<td class="col-first"><code><a href="At.html" title="annotation in org.spongepowered.asm.mixin.injection">At</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#from()">from</a></span></code></th>
<td class="col-last">
<div class="block">Injection point which specifies the <em>start</em> of the slice region.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#id()">id</a></span></code></th>
<td class="col-last">
<div class="block">The identifier for this slice, specified using the <a href="At.html#slice()"><code>At.slice()</code></a> value
 (if omitted, this slice becomes the <em>default slice</em> and applies to
 all undecorated <a href="At.html" title="annotation in org.spongepowered.asm.mixin.injection"><code>At</code></a> queries).</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code><a href="At.html" title="annotation in org.spongepowered.asm.mixin.injection">At</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#to()">to</a></span></code></th>
<td class="col-last">
<div class="block">Injection point which specifies the <em>end</em> of the slice region.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation.type.element.detail">
<ul class="details-list">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="id()">
<h3>id</h3>
<div class="member-signature"><span class="return-type">java.lang.String</span>&nbsp;<span class="member-name">id</span></div>
<div class="block">The identifier for this slice, specified using the <a href="At.html#slice()"><code>At.slice()</code></a> value
 (if omitted, this slice becomes the <em>default slice</em> and applies to
 all undecorated <a href="At.html" title="annotation in org.spongepowered.asm.mixin.injection"><code>At</code></a> queries).
 
 <p>This value can be safely ignored for injector types which only accept
 a single query (eg. <a href="Redirect.html" title="annotation in org.spongepowered.asm.mixin.injection"><code>Redirect</code></a> and others). However since
 <a href="Inject.html" title="annotation in org.spongepowered.asm.mixin.injection"><code>Inject</code></a> injectors can have multiple <a href="At.html" title="annotation in org.spongepowered.asm.mixin.injection"><code>At</code></a> queries, it may be
 desirable to have multiple slices as well. When specifying multiple
 slices, each should be designed a unique <tt>id</tt> which can then be
 referenced in the corresponding <tt>At</tt>.</p>
 
 <p>There are no specifications or restrictions for valid <tt>id</tt>s,
 however it is recommended that the <tt>id</tt> in some way describe the
 slice, thus allowing the <tt>At</tt> query to be read without necessarily
 reading the slice itself. For example, if the slice is selecting <em>all
 instructions before the first call to some method <tt>init</tt></em>,
 then using an id <tt>&quot;beforeInit</tt> makes sense. Using <em>before,
 after</em> and <em>between</em> prefixes as a loose standard is
 considered good practice.</p>
 
 <p>This value defaults to an empty string, the empty string is used as a
 default identifier throughout the injection subsystem, and any <a href="At.html" title="annotation in org.spongepowered.asm.mixin.injection"><code>At</code></a>
 which doesn't specify a slice explicitly will use this identifer.
 Specifying <tt>id</tt> or <tt>slice</tt> for injectors which only support
 a single slice is ignored internally, so you may use this field to give a
 descriptive name to the slice if you wish.</p></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The identifier for this slice</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="from()">
<h3>from</h3>
<div class="member-signature"><span class="return-type"><a href="At.html" title="annotation in org.spongepowered.asm.mixin.injection">At</a></span>&nbsp;<span class="member-name">from</span></div>
<div class="block">Injection point which specifies the <em>start</em> of the slice region.
 <a href="At.html" title="annotation in org.spongepowered.asm.mixin.injection"><code>At</code></a>s supplied here should generally specify a <a href="InjectionPoint.Selector.html" title="enum in org.spongepowered.asm.mixin.injection"><code>InjectionPoint.Selector</code></a>
 in order to identify which instruction should be used for queries which
 return multiple results. The selector is specified by appending the
 selector type to the injection point type as follows:
 
 <blockquote><pre>&#064;At(value = "INVOKE:LAST", ... )</pre></blockquote>
 
 <p>If <tt>from</tt> is not supplied then <a href="#to()"><code>to()</code></a> must be supplied. It
 is allowed to specify <b>both</b> <tt>from</tt> and <tt>to</tt> as long
 as the points select a region with positive size (eg the insn returned by
 <tt>to</tt> must appear after that selected by <tt>from</tt> in the
 method body).</p></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the start point of the slice</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>@org.spongepowered.asm.mixin.injection.At("HEAD")</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="to()">
<h3>to</h3>
<div class="member-signature"><span class="return-type"><a href="At.html" title="annotation in org.spongepowered.asm.mixin.injection">At</a></span>&nbsp;<span class="member-name">to</span></div>
<div class="block">Injection point which specifies the <em>end</em> of the slice region.
 Like <a href="#from()"><code>from()</code></a>, <a href="At.html" title="annotation in org.spongepowered.asm.mixin.injection"><code>At</code></a>s supplied here should generally specify a
 <a href="InjectionPoint.Selector.html" title="enum in org.spongepowered.asm.mixin.injection"><code>InjectionPoint.Selector</code></a> in order to identify which instruction should be used
 for queries which return multiple results. The selector is specified by
 appending the selector type to the injection point type as follows:
 
 <blockquote><pre>&#064;At(value = "INVOKE:LAST", ... )</pre></blockquote>
 
 <p>If <tt>to</tt> is not supplied then <a href="#from()"><code>from()</code></a> must be supplied. It
 is allowed to specify <b>both</b> <tt>from</tt> and <tt>to</tt> as long
 as the points select a region with positive size (eg the insn returned by
 <tt>to</tt> must appear <em>after</em> that selected by <tt>from</tt> in
 the method body).</p></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the start point of the slice</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>@org.spongepowered.asm.mixin.injection.At("TAIL")</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
</footer>
</div>
</div>
</body>
</html>
